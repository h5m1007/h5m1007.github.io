<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> require.js 学习笔记 · Leooon Blog</title><meta name="description" content="require.js 学习笔记 - Leon"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="google-site-verification" content="kx_a2Pxm8eUeXBh4VntVZ3IlkZpWcQMPjLgfTYpTLNI"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://h5m1007.github.io/atom.xml" title="Leooon Blog"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Leooon Blog" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">require.js 学习笔记</h1><div class="post-info">Oct 16, 2016</div><div class="post-content"><p>神奇的模块加载引擎，RequireJs。</p>
<h2 id="什么是RequireJs"><a href="#什么是RequireJs" class="headerlink" title="什么是RequireJs"></a>什么是RequireJs</h2><p>RequireJs致力于代码的模块化，使用了不同于传统<code>&lt;script&gt;</code>标签的脚本加载步骤，可用来加速并优化代码。  </p>
<h2 id="解决的问题"><a href="#解决的问题" class="headerlink" title="解决的问题"></a>解决的问题</h2><ol>
<li>实现js文件的异步加载，避免网页失去响应</li>
<li>管理模块之间的依赖性，便于代码的编写和维护  </li>
</ol>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><ol>
<li>在模版文档如名为template.html，来加载各模块，模版文档html的head位置，加载requireJs  </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;require.js&quot; data-main&#x3D;&quot;main&quot; defer async&#x3D;&quot;true&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>其中，data-main指明主模块js即所有代码的入口，首先被require.js加载，.js后缀省略，而async设为true指明该js文件异步加载，来避免网页失去响应，defer一样指明异步加载，只是这属性IE支持。  </p>
<ol start="2">
<li>主模块main.js的写法，如  </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    require.config(&#123;</span><br><span class="line">        baseUrl: &quot;js&quot;, &#x2F;&#x2F; 可配置根目录(可选)</span><br><span class="line">        paths: &#123;</span><br><span class="line">            &#x2F;&#x2F; 配置各模块路径(可选)</span><br><span class="line">            &quot;jquery&quot;: &quot;jquery.min&quot;, &#x2F;&#x2F; 命名该模块并指明路径，.js后缀省略</span><br><span class="line">            &quot;text&quot;: &quot;text&quot;, &#x2F;&#x2F; 插件text用来解析html文档</span><br><span class="line">            &quot;domReady&quot;: &quot;domReady&quot;, &#x2F;&#x2F; 插件domReady可让回调函数在页面DOM结构加载完成后再运行</span><br><span class="line">            ... &#x2F;&#x2F; 其它模块路径</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x2F;&#x2F; 加载非AMD规范的模块</span><br><span class="line">        &#x2F;&#x2F; 使用shim来定义它们的特征</span><br><span class="line">        shim: &#123;</span><br><span class="line">            &#x2F;&#x2F; shim属性用来配置不兼容的模块</span><br><span class="line">            &quot;jquery.scroll&quot;: &#123;</span><br><span class="line">                deps: [&quot;jquery&quot;], &#x2F;&#x2F; deps接受数组，标明该模块的依赖性</span><br><span class="line">                exports: &quot;jQuery.fn.scroll&quot; &#x2F;&#x2F; 标明该模块外部调用时的名称</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>其它模块采用AMD规范，即使用define()函数来定义，当该模块依赖其它模块时，define()接受的第一个参数为依赖的其它模块，同时必须是以数组的形式，如  </li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    &#x2F;&#x2F; model1</span><br><span class="line">    define(function()&#123;</span><br><span class="line">        &#x2F;&#x2F; 注意写法，函数命名最后返回该函数</span><br><span class="line">        var add &#x3D; function()&#123;</span><br><span class="line">            console.log(&quot;model 1&quot;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            add: add</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 或者</span><br><span class="line">        return add;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; model2</span><br><span class="line">    define([&quot;model1&quot;], function(model1)&#123;</span><br><span class="line">        model1.add;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 或者</span><br><span class="line">        model1();</span><br><span class="line">    &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

</div></article></div></main><footer><div class="paginator"><a href="/2016/10/19/learn-from-php/" class="prev">PREV</a><a href="/2016/10/16/learn-from-git/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2020 <a href="https://h5m1007.github.io">Leon</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>