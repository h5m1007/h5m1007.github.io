<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 从0开始配置新购MBP · Leooon Blog</title><meta name="description" content="从0开始配置新购MBP - Leon"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="google-site-verification" content="kx_a2Pxm8eUeXBh4VntVZ3IlkZpWcQMPjLgfTYpTLNI"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://h5m1007.github.io/atom.xml" title="Leooon Blog"><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="Leooon Blog" type="application/atom+xml">
</head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">从0开始配置新购MBP</h1><div class="post-info">Apr 30, 2020</div><div class="post-content"><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>新入手的 mbp，需要重新配置之前前端开发的环境，已经准备同步的内容有：</p>
<ol>
<li><p>Safari，Chrome 两大浏览器的历史数据，如浏览记录、书签、密码、拓展插件等等，分别以 iCould 和 Google 账号的同步功能，实现迁移机器数据的完美同步。</p>
</li>
<li><p>其它软件的同步工作，如软件之前的配置，安装的插件等等。</p>
<p> 开发软件列表：</p>
<ul>
<li><p>iTerm2：移步<a href="/2020/04/30/best-terminal-configure/">打造最佳终端</a>;</p>
</li>
<li><p>幕布：类似于Xmind脑图软件，用登录账号来实现同步已保存至云端的数据；</p>
</li>
<li><p>SwitchHosts：本地 hosts 文件修改软件，直接导入已从其它机器导出的配置文件即可；</p>
</li>
<li><p>VsCode：重量级软件，开发必备编辑器，同步功能使用 vscode 的 Setting Sync 插件，通过已在 gist 上传的配置文件来<br>实现同步工作，可同步之前已安装插件列表、软件配置等等；</p>
</li>
</ul>
</li>
<li><p>除了以上软件的配置安装之外，额外的坑还有：</p>
<ul>
<li><p>科学上网</p>
<p>  没有梯子没有条件就创造条件，国内想 download 一些如 brew、pip、乃至于用 git clone 都是基本没速度可言的，针对以上软件参考解决方案如下：</p>
<p>  <strong>brew</strong>：按照官方安装方式，因GFW的存在，可能会遇到下载不了或没速度，所以得换种方式。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh &gt;&gt; ~/brew_install.sh</span><br></pre></td></tr></table></figure>

<p>  修改 brew_install.sh 文件，更换里面的镜像源  </p>
<p>  <code>BREW_REPO = &quot;https://github.com/Homebrew/brew”</code><br>  ==&gt;<br>  <code>BREW_REPO=&quot;https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git”</code></p>
<p>  <img src="https://cdn.jsdelivr.net/gh/h5m1007/cloud-image@master/images/20200502172342.png" alt="修改 brew 镜像源"></p>
<p>  再执行 brew_install.sh 文件，不出意外，<code>brew -v</code> 显示版本号即安装完毕。</p>
<p>  <strong>pip</strong>：pip 是 python 包管理工具，系统默认自带的 python2.7 安装包里 easy_install.py 是默认安装的，而 pip 需另外安装</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#使用国内镜像源：https://pypi.tuna.tsinghua.edu.cn/simple/</span></span><br><span class="line">sudo easy_install -i https://pypi.tuna.tsinghua.edu.cn/simple/ pip</span><br></pre></td></tr></table></figure>
</li>
<li><p>Git 下载速度</p>
<p>  系统不会自带 Git，但安装在下载 Brew，会引导调用系统自动下载安装所必须的 Xcode(CLI) 以及 Git。</p>
<p>  进入主题，单单 Git Clone 个项目速度相当堪忧，解决此类问题，方案有几种：</p>
<p>  一般的方式是直接绑 hosts ( 可能本地网络原因亦或其它，反正对于我mbp无效，mmp )：</p>
<p>  查询以下两域名相对本地网络的 <a href="https://www.ipaddress.com" target="_blank" rel="noopener">IP 地址</a> ( 每个人查询到的可能不一 )</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">github.global.ssl.fastly.net</span><br><span class="line"></span><br><span class="line">github.com</span><br></pre></td></tr></table></figure>

<p>  <img src="https://cdn.jsdelivr.net/gh/h5m1007/cloud-image@master/images/20200502172728.png" alt="github.global.ssl.fastly.net"></p>
<p>  <img src="https://cdn.jsdelivr.net/gh/h5m1007/cloud-image@master/images/20200502173014.png" alt="github.com"></p>
<p>  假设查询到的 IP 地址是：  </p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">140.82.113.4 github.com</span><br><span class="line">199.232.69.194 github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure>

<p>  写入 <code>/etc/hosts</code> 文件末尾追加</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/hosts</span><br></pre></td></tr></table></figure>

<p>  因我已经安装了 SwitchHosts 该软件，直接写入配置文件立即生效。</p>
<p>  最后需要刷新 DNS</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo killall -HUP mDNSResponder</span><br></pre></td></tr></table></figure>

<p>  <strong>注</strong>：获取的 IP 因每个人不一样，且时而会更新，所以一旦速度变慢，重复以上步骤进行修改。</p>
<p>  另一种最直接了当的，借助现成工具实现加速：(<strong>力荐！</strong>)<br>  <a href="https://github.zhlh6.cn/" target="_blank" rel="noopener">Github加速器</a><br>  <a href="https://chrome.google.com/webstore/detail/github加速/kejahdakjmkfddgnifodfnpcklckjjpo" target="_blank" rel="noopener">Chrome插件</a></p>
</li>
<li><p>Brew</p>
<p>  <code>brew install xxx</code>，brew 安装软件速度依旧感人，解决方案仍然修改镜像源，修改 brew、homebrew-core 的项目 git remote 镜像源</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>"</span></span><br><span class="line"></span><br><span class="line">git remote <span class="built_in">set</span>-url origin https://mirrors.ustc.edu.cn/brew.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> <span class="string">"<span class="variable">$(brew --repo)</span>/Library/Taps/homebrew/homebrew-core"</span></span><br><span class="line"></span><br><span class="line">git remote <span class="built_in">set</span>-url origin https://mirrors.ustc.edu.cn/homebrew-core.git</span><br></pre></td></tr></table></figure>

<p>  最后更新下 brew <code>brew update</code>。</p>
<p>  还有一种费时费钱，挂代理：</p>
<p>  假设你已经用了如Shadowsocks，且也搭好服务器，不管是自己的还是自费的VPS。</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#端口1086不一定配置都是一致，按自己配置的修改</span></span><br><span class="line">ALL_PROXY=socks5://127.0.0.1:1086 brew install node</span><br></pre></td></tr></table></figure>

<p>  每次使用 brew 安装软件时，都需要手动加载代理，想方便的换也可把 <code>export ALL_PROXY=socks5://127.0.0.1:1086</code> 写入 <code>~/.zshrc</code> 终端配置文件里，但不建议这样做，因为可能会影响其它工具的使用。</p>
</li>
<li><p>Node</p>
<p>  建议直接使用 nvm Node版本管理软件，使用官方下载安装方式</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash</span><br></pre></td></tr></table></figure>

<p>  下载安装完成后，修改 <code>~/.zshrc</code> 终端配置文件里，往后继续追加</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启动终端时调用 nvm 执行文件</span></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">"<span class="variable">$([ -z "$&#123;XDG_CONFIG_HOME-&#125;" ] &amp;&amp; printf %s "$&#123;HOME&#125;/.nvm" || printf %s "$&#123;XDG_CONFIG_HOME&#125;/nvm")</span>"</span>[ -s <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span> ] &amp;&amp; \. <span class="string">"<span class="variable">$NVM_DIR</span>/nvm.sh"</span></span><br></pre></td></tr></table></figure>

<p>  <img src="https://cdn.jsdelivr.net/gh/h5m1007/cloud-image@master/images/20200502173809.png" alt="nvm"></p>
<p>  重启终端，<code>nvm install 12.16.3</code>，安装制定版本 node。</p>
</li>
</ul>
</li>
</ol>
</div></article></div></main><footer><div class="paginator"><a href="/2020/04/30/best-terminal-configure/" class="prev">PREV</a><a href="/2020/04/17/learn-from-optimize/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2020 <a href="https://h5m1007.github.io">Leon</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script></body></html>